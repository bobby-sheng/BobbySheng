---
title: "压测需求定制计算方法"
date: 2022-07-15 
lastmod: 2022-07-15 
tags:
  - Jmeter
keywords:
  - Jmeter
description: "压测需求定制计算方法"
cover:
    image: "https://telegraph-image-f19.pages.dev/file/8f76111583b25af2e447a.jpg"
---

### 1、普通计算方法

```bash
计算公式：TPS= 总请求数 / 总时间
按照需求所示，在2019年第32周，有4.13万的浏览量，那么总请求数，我们可以认为估算为4.13万（1次浏览都至少对应1个请求）
总请求数 = 4.13 万请求数 = 41300 请求数
总时间：由于不知道每个请求的具体时间，我们按照普通方法，我们可以按照一周的时间进行计算，总时间 = 1天 = 1 * 24 小时 = 24 * 3600 秒
套入公式可得：TPS = 41300请求数/24*3600秒 = 0.48请求数/秒
结论：按照普通计算方法，我们在测试环境对相同的系统进行性能测试时，每秒能够发送0.48请求就可以满足线上的需要
```

### 2、二八原则计算方法

```bash
二八原则就是指80%的请求在20%的时间内完成
计算公式 ： TPS = 总请求数 80% / (总时间20%)
**按照公式进行计算：TPS = 41300 * 0.8请求数 / 24*3600*0.2秒 = 1.91 请求数/秒
**结论：**按照二八原则计算，在测试环境我们的TPS只要能达到1.91请求数每秒就能满足线上需要。二八原则的估算结果会比平均值的计算方法更能满足用户需求。
```

### 3、照业务数据进行计算

```bash
计算模拟用户正常业务操作（稳定性测试）的并发量：
根据这些数据统计图，可以得出结论：
大部分订单在8点-24点之间，因此系统的有效工作时长为16个小时
从订单数量统计，8-24点之间的订单占一天总订单的98%左右（40474个）
结合二八原则计算公式 ： TPS = 总请求数 80% / (总时间20%)
需要在测试环境模拟用户正常业务操作（稳定性测试）的并发量为：TPS = 40474 * 0.8请求数 / 16*3600*0.2秒 = 2.81 请求数/秒
计算模拟用户峰值业务操作（压力测试）的并发量：
根据这些数据统计图，可以得出结论：
订单最高峰在在21点-22点之间，一小时的订单总数大约为8853个
计算压力测试的并发数：TPS = 峰值请求数/峰值时间 * 系数
需要在测试环境模拟用户峰值业务操作（压力测试）的并发量为：

TPS = 8853 请求数 / 3600秒 * 3（系数） = 7.38 请求数/秒
```