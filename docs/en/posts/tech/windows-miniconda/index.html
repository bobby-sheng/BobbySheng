<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>windows | miniconda 配置 python 虚拟环境 | Bobby Blog</title>
<meta name="keywords" content="windows, python">
<meta name="description" content="0 前言 python 虚拟环境的重要性已经无需多言了, 目前所有支持 python 虚拟环境的工具中最好用的应该就是 conda 了, 最重要的一点是可以一键创建不同版本的 python 环境以适应不同的需求. Anaconda 比较臃肿, 本文使用无 GUI 的 miniconda. 环境: win10 miniconda3-py11-23.5.2-0 1 安装 安装前需要确认一下系统及用户的环境变量中不要存在中文, 在 CMD 中直接执行 path 或者 git-bash 中执行 echo">
<meta name="author" content="作者:&nbsp;Bobby">
<link rel="canonical" href="https://bobby-sheng.github.io/BobbySheng.github.io/en/posts/tech/windows-miniconda/">
<link crossorigin="anonymous" href="/BobbySheng.github.io/assets/css/stylesheet.36912c877a94473d8accde2ca62d94a475c105f02e84337f8893df83b1631be4.css" integrity="sha256-NpEsh3qURz2KzN4spi2UpHXBBfAuhDN/iJPfg7FjG&#43;Q=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/BobbySheng.github.io/assets/js/highlight.acb54fd32bbc1982428b8850317e45d076b95012730a5936667e6bc21777692a.js" integrity="sha256-rLVP0yu8GYJCi4hQMX5F0Ha5UBJzClk2Zn5rwhd3aSo="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://bobby-sheng.github.io/BobbySheng.github.io/img/avatar.gif">
<link rel="icon" type="image/png" sizes="16x16" href="https://bobby-sheng.github.io/BobbySheng.github.io/img/avatar.gif">
<link rel="icon" type="image/png" sizes="32x32" href="https://bobby-sheng.github.io/BobbySheng.github.io/img/avatar.gif">
<link rel="apple-touch-icon" href="https://bobby-sheng.github.io/BobbySheng.github.io/img/avatar.gif">
<link rel="mask-icon" href="https://bobby-sheng.github.io/BobbySheng.github.io/img/avatar.gif">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://bobby-sheng.github.io/BobbySheng.github.io/en/posts/tech/windows-miniconda/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = ""; 
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>




  

<meta property="og:title" content="windows | miniconda 配置 python 虚拟环境" />
<meta property="og:description" content="0 前言 python 虚拟环境的重要性已经无需多言了, 目前所有支持 python 虚拟环境的工具中最好用的应该就是 conda 了, 最重要的一点是可以一键创建不同版本的 python 环境以适应不同的需求. Anaconda 比较臃肿, 本文使用无 GUI 的 miniconda. 环境: win10 miniconda3-py11-23.5.2-0 1 安装 安装前需要确认一下系统及用户的环境变量中不要存在中文, 在 CMD 中直接执行 path 或者 git-bash 中执行 echo" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://bobby-sheng.github.io/BobbySheng.github.io/en/posts/tech/windows-miniconda/" />
<meta property="og:image" content="https://source.unsplash.com/random/400x200?code" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-08-07T00:00:00+00:00" />
<meta property="article:modified_time" content="2024-01-28T00:00:00+00:00" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://source.unsplash.com/random/400x200?code" />
<meta name="twitter:title" content="windows | miniconda 配置 python 虚拟环境"/>
<meta name="twitter:description" content="0 前言 python 虚拟环境的重要性已经无需多言了, 目前所有支持 python 虚拟环境的工具中最好用的应该就是 conda 了, 最重要的一点是可以一键创建不同版本的 python 环境以适应不同的需求. Anaconda 比较臃肿, 本文使用无 GUI 的 miniconda. 环境: win10 miniconda3-py11-23.5.2-0 1 安装 安装前需要确认一下系统及用户的环境变量中不要存在中文, 在 CMD 中直接执行 path 或者 git-bash 中执行 echo"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "📚 文章",
      "item": "https://bobby-sheng.github.io/BobbySheng.github.io/en/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "👨🏻‍💻 技术",
      "item": "https://bobby-sheng.github.io/BobbySheng.github.io/en/posts/tech/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "windows | miniconda 配置 python 虚拟环境",
      "item": "https://bobby-sheng.github.io/BobbySheng.github.io/en/posts/tech/windows-miniconda/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "windows | miniconda 配置 python 虚拟环境",
  "name": "windows | miniconda 配置 python 虚拟环境",
  "description": "0 前言 python 虚拟环境的重要性已经无需多言了, 目前所有支持 python 虚拟环境的工具中最好用的应该就是 conda 了, 最重要的一点是可以一键创建不同版本的 python 环境以适应不同的需求. Anaconda 比较臃肿, 本文使用无 GUI 的 miniconda. 环境: win10 miniconda3-py11-23.5.2-0 1 安装 安装前需要确认一下系统及用户的环境变量中不要存在中文, 在 CMD 中直接执行 path 或者 git-bash 中执行 echo",
  "keywords": [
    "windows", "python"
  ],
  "articleBody": "0 前言 python 虚拟环境的重要性已经无需多言了, 目前所有支持 python 虚拟环境的工具中最好用的应该就是 conda 了, 最重要的一点是可以一键创建不同版本的 python 环境以适应不同的需求.\nAnaconda 比较臃肿, 本文使用无 GUI 的 miniconda.\n环境:\nwin10 miniconda3-py11-23.5.2-0 1 安装 安装前需要确认一下系统及用户的环境变量中不要存在中文, 在 CMD 中直接执行 path 或者 git-bash 中执行 echo $PATH 进行确认, 这个问题当时被折磨疯了, 还给 conda 项目提了 issue.\n最新版下载地址\n选好路径直接下一步即可, 没有需要注意的自定义配置项\n2 配置 2.1 环境变量 在用户环境变量 PATH 添加如下项, 我的安装路径是 D:\\miniconda, 按实际情况修改\nD:\\software\\miniconda D:\\software\\miniconda\\Scripts D:\\software\\miniconda\\Library\\bin 添加完后重启系统, 让系统重新读取一下环境变量\n2.2 conda 配置 参考链接\nminiconda 默认没有 .condarc 配置文件, 需要生成一下\nconda config --set show_channel_urls yes .condarc 会生成到用户目录下\n$ cat .condarc channels: - defaults show_channel_urls: true default_channels: - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/msys2 custom_channels: conda-forge: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud msys2: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud bioconda: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud menpo: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud pytorch: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud pytorch-lts: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud simpleitk: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud deepmodeling: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/ # 不自动激活 base 环境 auto_activate_base: false # 虚拟环境存放路径 envs_dirs: - D:\\software\\python\\envs # pkg 存放路径 pkgs_dirs: - D:\\software\\python\\pkgs 上述配置文件中主要配置了三项: conda 的清华国内源, 虚拟环境和 pkg 的存储路径\n如不配置创建虚拟环境时可能会生成到用户目录下, 导致系统盘臃肿, 建议新建一个目录专门存放\n2.3 pip 配置 系统中直接安装的 python, 其 pip 的配置文件一般存放在用户目录的 .pip/pip.ini, 使用 conda 创建的虚拟环境的 pip 则不同, 可以使用如下命令查看, 这个问题当时也折磨了我很久\n$ pip -v config list For variant 'global', will try loading 'C:\\ProgramData\\pip\\pip.ini' For variant 'user', will try loading 'C:\\Users\\Bobby\\pip\\pip.ini' For variant 'user', will try loading 'C:\\Users\\Bobby\\AppData\\Roaming\\pip\\pip.ini' For variant 'site', will try loading 'D:\\software\\miniconda\\pip.ini' 这里我们使用用户目录存放配置文件, 默认也是没有的\n$ cat pip/pip.ini [global] timeout = 6000 index-url = http://pypi.tuna.tsinghua.edu.cn/simple trusted-host = pypi.tuna.tsinghua.edu.cn proxy=http://127.0.0.1:7890 配置 pip 使用国内的清华源, 最后一条 proxy 可以不写, 这个问题是因为我常开代理, pip 默认用 https 访问系统代理, 导致 pip 报错.\n2.4 管理虚拟环境 上述步骤做完后就可以正式使用 conda 创建虚拟环境了\n用管理员打开 powershell 使用如下命令初始化 conda\nconda init powershell conda init cmd conda init bash 之后重新打开终端, 创建你的虚拟环境, -n 表示虚拟环境的名字, 不指定 python 版本默认最新\nconda create -n py37 python=3.7 激活虚拟环境\nconda activate py37 退出虚拟环境\nconda deactivate 查看虚拟环境列表\nconda env list 删除虚拟环境\nconda env remove -n py37 --all 3 其他 conda 最为人诟病的点应该是包管理跟 pip 可能会产生一些冲突, conda 官方给出的最佳方案是\n全程使用 conda install 来安装模块, 实在不行再用 pip 使用 conda 创建完虚拟环境后, 一直用 pip 来管理模块 pip 应使用 –upgrade-strategy only-if-needed 参数运行, 以防止通过 conda 安装的软件包进行不必要的升级. 这是运行 pip 时的默认设置, 不应更改 不要将 pip 与 –user 参数一起使用，避免所有用户安装 总结一下就是不要来回地用 pip 和 conda, 专一一点 (笑\n以上\n",
  "wordCount" : "967",
  "inLanguage": "en",
  "image":"https://source.unsplash.com/random/400x200?code","datePublished": "2023-08-07T00:00:00Z",
  "dateModified": "2024-01-28T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Bobby"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://bobby-sheng.github.io/BobbySheng.github.io/en/posts/tech/windows-miniconda/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Bobby Blog",
    "logo": {
      "@type": "ImageObject",
      "url": "https://bobby-sheng.github.io/BobbySheng.github.io/img/avatar.gif"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://bobby-sheng.github.io/BobbySheng.github.io/en/" accesskey="h" title="Bobby Blog (Alt + H)">
                <img src="https://bobby-sheng.github.io/BobbySheng.github.io/img/alipay.png" alt="" aria-label="logo"
                    height="35">Bobby Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <ul class="lang-switch"><li>|</li>
                </ul>
            </div>
        </div>
        <ul id="menu">
            <li class="menu-item">
                <a href="https://bobby-sheng.github.io/BobbySheng.github.io/en/search" title="🔍 搜索 (Alt &#43; /)" accesskey=/>
                    <span>🔍 搜索</span>
                    
                </a>
            
            </li>
            <li class="menu-item">
                <a href="https://bobby-sheng.github.io/BobbySheng.github.io/en/posts" title="📚 文章">
                    <span>📚 文章</span>
                    
                </a>
            
            </li>
            <li class="menu-item">
                <a href="https://bobby-sheng.github.io/BobbySheng.github.io/en/archives" title="📈 归档">
                    <span>📈 归档</span>
                    
                </a>
            
            </li>
            <li class="menu-item">
                <a href="https://bobby-sheng.github.io/BobbySheng.github.io/en/about" title="🙋🏻‍♂️ 关于">
                    <span>🙋🏻‍♂️ 关于</span>
                    
                </a>
            
            </li>
        </ul>
    </nav>
</header>
<main class="main page">
<article class="post-single">
    <div id="single-content">
        <header class="post-header">
            <div class="breadcrumbs"><a href="https://bobby-sheng.github.io/BobbySheng.github.io/en/">主页</a>&nbsp;»&nbsp;<a href="https://bobby-sheng.github.io/BobbySheng.github.io/en/posts/">📚 文章</a>&nbsp;»&nbsp;<a href="https://bobby-sheng.github.io/BobbySheng.github.io/en/posts/tech/">👨🏻‍💻 技术</a></div>
            <h1 class="post-title">
                windows | miniconda 配置 python 虚拟环境
            </h1>
            <div class="post-meta">

<style>
    i[id*="post_meta_style"] {
        display: flex;
        align-items: center;
        margin: 0 0 10px 0;
    }

    .parent-post-meta {
        display: flex;
        flex-wrap: wrap;
        opacity: 0.8;
    }
</style>

<span class="parent-post-meta">
    <span id="post_meta_style_1">
        <span class="fa fa-calendar-check-o"></span>
        <span>2023-08-07
            &nbsp;&nbsp;
        </span>
    </span>
    
    
    
    
    
    
    
    <span id="post_meta_style_3">
        <span class="fa fa-file-word-o"></span>
        <span>967字
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_4">
        <span class="fa fa-clock-o"></span>
        <span>2分钟
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_5">
        <span class="fa fa-user-o"></span>
        <span>作者:&nbsp;Bobby
            &nbsp;&nbsp;
        </span>
    </span>
    <span id="post_meta_style_6">
        <span class="fa fa-tags" style="opacity: 0.8"></span>
        <span>
            <span class="post-tags-meta">
                <a href="https://bobby-sheng.github.io/BobbySheng.github.io/en/tags/windows/" style="color: var(--secondary)!important;">Windows</a>
                &nbsp;<a href="https://bobby-sheng.github.io/BobbySheng.github.io/en/tags/python/" style="color: var(--secondary)!important;">Python</a>
            </span>
        </span>
    </span>
</span>
<span style="opacity: 0.8;">
                    <span id="post_meta_style_7">
                        &nbsp;&nbsp;
                        <span class="fa fa-eye" ></span>
                        <span>
                            <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv"></span></span>
                            &nbsp;&nbsp;
                        </span>
                    </span>
                    <span id="post_meta_style_8">
                        <span class="fa fa-commenting-o"></span>
                        <span>
                            <script src="https://cdn.staticfile.org/twikoo/1.6.15/twikoo.all.min.js"></script>
                            <script>
                                let url = document.documentURI
                                
                                let dnsUrl = "https://bobby-sheng.github.io/BobbySheng.github.io/"
                                let urlSplit = url.split(dnsUrl)
                                let finalUrl = urlSplit[1]
                                if (finalUrl[0] !== '/') {
                                    finalUrl = '/'+finalUrl
                                }
                                twikoo.getCommentsCount({
                                    envId:  null , 
                                region:  null , 
                                urls: [ 
                                    
                                    finalUrl,
                                ],
                                    includeReply: false 
                                }).then(function (res) {
                                    let count = res[0].count
                                    const obj = document.getElementById("comment_count");
                                    obj.innerText = count
                                    
                                    
                                    
                                }).catch(function (err) {
                                    
                                    console.error(err);
                                });
                            </script>
                            <span id="comment_count"></span>
                        </span>
                    </span>
                </span>

</div>
        </header> <aside id="toc-container" class="toc-container wide">
    <div class="toc">
        <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">文章目录</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#0-%e5%89%8d%e8%a8%80" aria-label="0 前言">0 前言</a></li>
                <li>
                    <a href="#1-%e5%ae%89%e8%a3%85" aria-label="1 安装">1 安装</a></li>
                <li>
                    <a href="#2-%e9%85%8d%e7%bd%ae" aria-label="2 配置">2 配置</a><ul>
                        
                <li>
                    <a href="#21-%e7%8e%af%e5%a2%83%e5%8f%98%e9%87%8f" aria-label="2.1 环境变量">2.1 环境变量</a></li>
                <li>
                    <a href="#22-conda-%e9%85%8d%e7%bd%ae" aria-label="2.2 conda 配置">2.2 conda 配置</a></li>
                <li>
                    <a href="#23-pip-%e9%85%8d%e7%bd%ae" aria-label="2.3 pip 配置">2.3 pip 配置</a></li>
                <li>
                    <a href="#24-%e7%ae%a1%e7%90%86%e8%99%9a%e6%8b%9f%e7%8e%af%e5%a2%83" aria-label="2.4 管理虚拟环境">2.4 管理虚拟环境</a></li></ul>
                </li>
                <li>
                    <a href="#3-%e5%85%b6%e4%bb%96" aria-label="3 其他">3 其他</a>
                </li>
            </ul>
        </div>
        </details>
    </div>
</aside>
<script>
    let activeElement;
    let elements;
    window.addEventListener('DOMContentLoaded', function (event) {
        checkTocPosition();

        elements = document.querySelectorAll('h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]');
        
        activeElement = elements[0];
        const id = encodeURI(activeElement.getAttribute('id')).toLowerCase();
        document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
    }, false);

    window.addEventListener('resize', function(event) {
        checkTocPosition();
    }, false);

    window.addEventListener('scroll', () => {
        
        activeElement = Array.from(elements).find((element) => {
            if ((getOffsetTop(element) - window.pageYOffset) > 0 &&
                (getOffsetTop(element) - window.pageYOffset) < window.innerHeight/2) {
                return element;
            }
        }) || activeElement

        elements.forEach(element => {
            const id = encodeURI(element.getAttribute('id')).toLowerCase();
            if (element === activeElement){
                document.querySelector(`.inner ul li a[href="#${id}"]`).classList.add('active');
            } else {
                document.querySelector(`.inner ul li a[href="#${id}"]`).classList.remove('active');
            }
        })
    }, false);

    const main = parseInt(getComputedStyle(document.body).getPropertyValue('--article-width'), 10);
    const toc = parseInt(getComputedStyle(document.body).getPropertyValue('--toc-width'), 10);
    const gap = parseInt(getComputedStyle(document.body).getPropertyValue('--gap'), 10);

    function checkTocPosition() {
        const width = document.body.scrollWidth;
        if (width - main - (toc * 2) - (gap * 4) > 0) {
            document.getElementById("toc-container").classList.add("wide");
        } else {
            document.getElementById("toc-container").classList.remove("wide");
        }
    }

    function getOffsetTop(element) {
        if (!element.getClientRects().length) {
            return 0;
        }
        let rect = element.getBoundingClientRect();
        let win = element.ownerDocument.defaultView;
        return rect.top + win.pageYOffset;
    }
</script>
        <div class="post-content"><h1 id="0-前言">0 前言<a hidden class="anchor" aria-hidden="true" href="#0-前言">#</a></h1>
<p>python 虚拟环境的重要性已经无需多言了, 目前所有支持 python 虚拟环境的工具中最好用的应该就是 conda 了, 最重要的一点是可以一键创建不同版本的 python 环境以适应不同的需求.</p>
<p>Anaconda 比较臃肿, 本文使用无 GUI 的 <a href="https://docs.conda.io/en/latest/miniconda.html" target="_blank" rel="noopener" style="color:#42b983";>miniconda</a>.</p>
<p>环境:</p>
<ul>
<li>win10</li>
<li>miniconda3-py11-23.5.2-0</li>
</ul>
<h1 id="1-安装">1 安装<a hidden class="anchor" aria-hidden="true" href="#1-安装">#</a></h1>
<p>安装前需要确认一下系统及用户的环境变量中不要存在中文, 在 CMD 中直接执行 <code>path</code> 或者 git-bash 中执行 <code>echo $PATH</code> 进行确认, 这个问题当时被折磨疯了, 还给 conda 项目提了 <a href="https://github.com/conda/conda/issues/12968" target="_blank" rel="noopener" style="color:#42b983";>issue</a>.</p>
<p><a href="https://repo.anaconda.com/miniconda/Miniconda3-latest-Windows-x86_64.exe" target="_blank" rel="noopener" style="color:#42b983";>最新版下载地址</a></p>
<p>选好路径直接下一步即可, 没有需要注意的自定义配置项</p>
<h1 id="2-配置">2 配置<a hidden class="anchor" aria-hidden="true" href="#2-配置">#</a></h1>
<h2 id="21-环境变量">2.1 环境变量<a hidden class="anchor" aria-hidden="true" href="#21-环境变量">#</a></h2>
<p>在用户环境变量 <code>PATH</code> 添加如下项, 我的安装路径是 <code>D:\miniconda</code>, 按实际情况修改</p>
<div class="highlight"><pre tabindex="0" style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>D:\software\miniconda
</span></span><span style="display:flex;"><span>D:\software\miniconda\Scripts
</span></span><span style="display:flex;"><span>D:\software\miniconda\Library\bin
</span></span></code></pre></div><p>添加完后重启系统, 让系统重新读取一下环境变量</p>
<h2 id="22-conda-配置">2.2 conda 配置<a hidden class="anchor" aria-hidden="true" href="#22-conda-配置">#</a></h2>
<p><a href="https://mirrors.tuna.tsinghua.edu.cn/help/anaconda/" target="_blank" rel="noopener" style="color:#42b983";>参考链接</a></p>
<p>miniconda 默认没有 <code>.condarc</code> 配置文件, 需要生成一下</p>
<div class="highlight"><pre tabindex="0" style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>conda config --set show_channel_urls yes
</span></span></code></pre></div><p><code>.condarc</code> 会生成到用户目录下</p>
<div class="highlight"><pre tabindex="0" style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f99b15">$ cat .condarc</span>
</span></span><span style="display:flex;"><span><span style="color:#5bc4bf">channels</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f99b15">defaults</span>
</span></span><span style="display:flex;"><span><span style="color:#5bc4bf">show_channel_urls</span>: <span style="color:#815ba4">true</span>
</span></span><span style="display:flex;"><span><span style="color:#5bc4bf">default_channels</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f99b15">https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f99b15">https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r</span>
</span></span><span style="display:flex;"><span>  - <span style="color:#f99b15">https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/msys2</span>
</span></span><span style="display:flex;"><span><span style="color:#5bc4bf">custom_channels</span>:
</span></span><span style="display:flex;"><span>  <span style="color:#5bc4bf">conda-forge</span>: <span style="color:#f99b15">https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span>
</span></span><span style="display:flex;"><span>  <span style="color:#5bc4bf">msys2</span>: <span style="color:#f99b15">https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span>
</span></span><span style="display:flex;"><span>  <span style="color:#5bc4bf">bioconda</span>: <span style="color:#f99b15">https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span>
</span></span><span style="display:flex;"><span>  <span style="color:#5bc4bf">menpo</span>: <span style="color:#f99b15">https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span>
</span></span><span style="display:flex;"><span>  <span style="color:#5bc4bf">pytorch</span>: <span style="color:#f99b15">https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span>
</span></span><span style="display:flex;"><span>  <span style="color:#5bc4bf">pytorch-lts</span>: <span style="color:#f99b15">https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span>
</span></span><span style="display:flex;"><span>  <span style="color:#5bc4bf">simpleitk</span>: <span style="color:#f99b15">https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud</span>
</span></span><span style="display:flex;"><span>  <span style="color:#5bc4bf">deepmodeling</span>: <span style="color:#f99b15">https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud/</span>
</span></span><span style="display:flex;"><span><span style="color:#776e71"># 不自动激活 base 环境</span>
</span></span><span style="display:flex;"><span><span style="color:#5bc4bf">auto_activate_base</span>: <span style="color:#815ba4">false</span>
</span></span><span style="display:flex;"><span><span style="color:#776e71"># 虚拟环境存放路径</span>
</span></span><span style="display:flex;"><span><span style="color:#5bc4bf">envs_dirs</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f99b15">D:\software\python\envs</span>
</span></span><span style="display:flex;"><span><span style="color:#776e71"># pkg 存放路径</span>
</span></span><span style="display:flex;"><span><span style="color:#5bc4bf">pkgs_dirs</span>:
</span></span><span style="display:flex;"><span>  - <span style="color:#f99b15">D:\software\python\pkgs</span>
</span></span></code></pre></div><p>上述配置文件中主要配置了三项: conda 的清华国内源, 虚拟环境和 pkg 的存储路径</p>
<p>如不配置创建虚拟环境时可能会生成到用户目录下, 导致系统盘臃肿, 建议新建一个目录专门存放</p>
<h2 id="23-pip-配置">2.3 pip 配置<a hidden class="anchor" aria-hidden="true" href="#23-pip-配置">#</a></h2>
<p>系统中直接安装的 python, 其 pip 的配置文件一般存放在用户目录的 <code>.pip/pip.ini</code>, 使用 conda 创建的虚拟环境的 pip 则不同, 可以使用如下命令查看, 这个问题当时也折磨了我很久</p>
<div class="highlight"><pre tabindex="0" style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>$ pip -v config list
</span></span><span style="display:flex;"><span>For variant &#39;global&#39;, will try loading &#39;C:\ProgramData\pip\pip.ini&#39;
</span></span><span style="display:flex;"><span>For variant &#39;user&#39;, will try loading &#39;C:\Users\Bobby\pip\pip.ini&#39;
</span></span><span style="display:flex;"><span>For variant &#39;user&#39;, will try loading &#39;C:\Users\Bobby\AppData\Roaming\pip\pip.ini&#39;
</span></span><span style="display:flex;"><span>For variant &#39;site&#39;, will try loading &#39;D:\software\miniconda\pip.ini&#39;
</span></span></code></pre></div><p>这里我们使用用户目录存放配置文件, 默认也是没有的</p>
<div class="highlight"><pre tabindex="0" style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-text" data-lang="text"><span style="display:flex;"><span>$ cat pip/pip.ini
</span></span><span style="display:flex;"><span>[global]
</span></span><span style="display:flex;"><span>timeout = 6000
</span></span><span style="display:flex;"><span>index-url = http://pypi.tuna.tsinghua.edu.cn/simple
</span></span><span style="display:flex;"><span>trusted-host = pypi.tuna.tsinghua.edu.cn
</span></span><span style="display:flex;"><span>proxy=http://127.0.0.1:7890
</span></span></code></pre></div><p>配置 pip 使用国内的清华源, 最后一条 proxy 可以不写, 这个问题是因为我常开代理, pip 默认用 https 访问系统代理, 导致 pip 报错.</p>
<h2 id="24-管理虚拟环境">2.4 管理虚拟环境<a hidden class="anchor" aria-hidden="true" href="#24-管理虚拟环境">#</a></h2>
<p>上述步骤做完后就可以正式使用 conda 创建虚拟环境了</p>
<p>用管理员打开 <code>powershell</code> 使用如下命令初始化 conda</p>
<div class="highlight"><pre tabindex="0" style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>conda init powershell
</span></span><span style="display:flex;"><span>conda init cmd
</span></span><span style="display:flex;"><span>conda init bash
</span></span></code></pre></div><p>之后重新打开终端, 创建你的虚拟环境, <code>-n</code> 表示虚拟环境的名字, 不指定 python 版本默认最新</p>
<div class="highlight"><pre tabindex="0" style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>conda create -n py37 <span style="color:#ef6155">python</span><span style="color:#5bc4bf">=</span>3.7
</span></span></code></pre></div><p>激活虚拟环境</p>
<div class="highlight"><pre tabindex="0" style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>conda activate py37
</span></span></code></pre></div><p>退出虚拟环境</p>
<div class="highlight"><pre tabindex="0" style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>conda deactivate
</span></span></code></pre></div><p>查看虚拟环境列表</p>
<div class="highlight"><pre tabindex="0" style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>conda env list
</span></span></code></pre></div><p>删除虚拟环境</p>
<div class="highlight"><pre tabindex="0" style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>conda env remove -n py37 --all
</span></span></code></pre></div><h1 id="3-其他">3 其他<a hidden class="anchor" aria-hidden="true" href="#3-其他">#</a></h1>
<p>conda 最为人诟病的点应该是包管理跟 pip 可能会产生一些冲突, conda 官方给出的最佳方案是</p>
<ul>
<li>全程使用 <code>conda install</code> 来安装模块, 实在不行再用 <code>pip</code></li>
<li>使用 conda 创建完虚拟环境后, 一直用 <code>pip</code> 来管理模块
<ul>
<li>pip 应使用 <code>–upgrade-strategy only-if-needed</code> 参数运行, 以防止通过 conda 安装的软件包进行不必要的升级. 这是运行 pip 时的默认设置, 不应更改</li>
<li>不要将 pip 与 <code>–user</code> 参数一起使用，避免所有用户安装</li>
</ul>
</li>
</ul>
<p>总结一下就是不要来回地用 pip 和 conda, 专一一点 (笑</p>
<p>以上</p>


        </div>
        <div class="post-reward">
            <div style="padding: 0 0 0 0; margin: 0 0 0 0; width: 100%; font-size:16px; text-align: center;">
                <div id="QR" style="opacity: 0;">
                    <div id="wechat" style="display: inline-block">
                        <a class="fancybox" rel="group">
                            <img id="wechat_qr" src="https://bobby-sheng.github.io/BobbySheng.github.io/img/wechat_pay.png" alt="wechat_pay"></a>
                        <p>微信</p>
                    </div>
                    <div id="alipay" style="display: inline-block">
                        <a class="fancybox" rel="group">
                            <img id="alipay_qr" src="https://bobby-sheng.github.io/BobbySheng.github.io/img/alipay.png" alt="alipay"></a>
                        <p>支付宝</p>
                    </div>
                </div>
                <button id="rewardButton"
                        onclick="
                    var qr = document.getElementById('QR');
                    if (qr.style.opacity === '0') {
                        qr.style.opacity='1';
                    } else {
                        qr.style.opacity='0'
                    }"
                >
                    <span>🧧 鼓励</span>
                </button>
            </div>
        </div>

        <footer class="post-footer">
            
<nav class="paginav">
  <a class="prev" href="https://bobby-sheng.github.io/BobbySheng.github.io/en/posts/blog/hello-hugo/">
    <span class="title">« 上一页</span>
    <br>
    <span>【置顶】Hello, hugo!</span>
  </a>
  <a class="next" href="https://bobby-sheng.github.io/BobbySheng.github.io/en/posts/tech/python-logic-problem-guiguzi/">
    <span class="title">下一页 »</span>
    <br>
    <span>python | 鬼谷子数学问题</span>
  </a>
</nav>

        </footer>
    </div>



<div>
    <div class="pagination__title">
        <span class="pagination__title-h" style="font-size: 20px;">💬评论</span>
        <hr />
    </div>

    <div id="tcomment"></div>

    <script src="https://cdn.staticfile.org/twikoo/1.6.15/twikoo.all.min.js">
    </script>
    

    

    <script>
        twikoo.init({
            envId: "https://twikoo.Bobby.cn/", 
            el: "#tcomment",
            lang: 'zh-CN',
            
            path: window.TWIKOO_MAGIC_PATH||window.location.pathname,
            
            
            
            
            
            
            
        });
    </script>

</div>
</article>
</main>


<footer class="footer">

    <a href="https://gohugo.io/" target="_blank">
        <img style="display: unset;" src="https://img.shields.io/badge/frame-hugo-blue?style=flat&logo=hugo">
    </a>
    <a href="https://github.com/adityatelange/hugo-PaperMod" target="_blank">
        <img style="display: unset;" src="https://img.shields.io/badge/theme-papermod-lightgrey?style=flat&logo=BookStack">
    </a>

    <br>

    <span id="runtime_span"></span>
    <script
        type="text/javascript">function show_runtime() { window.setTimeout("show_runtime()", 1000); X = new Date("7/13/2021 1:00:00"); Y = new Date(); T = (Y.getTime() - X.getTime()); M = 24 * 60 * 60 * 1000; a = T / M; A = Math.floor(a); b = (a - A) * 24; B = Math.floor(b); c = (b - B) * 60; C = Math.floor((b - B) * 60); D = Math.floor((c - C) * 60); runtime_span.innerHTML = "网站已运行" + A + "天" + B + "小时" + C + "分" + D + "秒" } show_runtime();</script>
    |
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span id="busuanzi_container">
        
        总访客数:  <span id="busuanzi_value_site_uv"></span>
        |
        总访问量:  <span id="busuanzi_value_site_pv"></span>
    </span>

    <br>

    <a href="https://beian.miit.gov.cn/" target="_blank" style="border-bottom:1px solid">Bobby</a>&nbsp;
    |
    <span>
        Copyright
        &copy;
        2020-2024
        <a href="https://bobby-sheng.github.io/BobbySheng.github.io/en/" style="border-bottom:1px solid">Bobby Blog</a>
    </span>

    
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <span class="topInner">
        <svg class="topSvg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
            <path d="M12 6H0l6-6z" />
        </svg>
        <span id="read_progress"></span>
    </span>
</a>

<script>
    document.addEventListener('scroll', function (e) {
        const readProgress = document.getElementById("read_progress");
        const scrollHeight = document.documentElement.scrollHeight;
        const clientHeight = document.documentElement.clientHeight;
        const scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
        
        readProgress.innerText = ((scrollTop / (scrollHeight - clientHeight)).toFixed(2) * 100).toFixed(0);
    })
</script>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    let mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 400 || document.documentElement.scrollTop > 400) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };
</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>


<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = '📄复制';

        function copyingDone() {
            copybutton.innerText = '👌🏻已复制!';
            setTimeout(() => {
                copybutton.innerText = '📄复制';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            
            
            
            
            
            
            
            
            
            
            
            
            
            

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) {
            }
            ;
            selection.removeRange(range);
        });

        let language = codeblock.className.replaceAll("language-", "")
        let macTool = document.createElement("div")
        let macTool1 = document.createElement("div")
        let macTool2 = document.createElement("div")
        let macTool3 = document.createElement("div")
        let languageType = document.createElement("div")
        languageType.innerText = language
        macTool.setAttribute('class', 'mac-tool')
        macTool1.setAttribute('class', 'mac bb1')
        macTool2.setAttribute('class', 'mac bb2')
        macTool3.setAttribute('class', 'mac bb3')
        languageType.setAttribute('class', 'language-type')
        macTool.appendChild(macTool1)
        macTool.appendChild(macTool2)
        macTool.appendChild(macTool3)
        macTool.appendChild(languageType)

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
            container.appendChild(macTool)
        } else if (container.parentNode.firstChild === container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName === "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
            container.appendChild(macTool)
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
            container.appendChild(macTool)
        }
    });
</script>

</body>

</html>
